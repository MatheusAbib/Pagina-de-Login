<app-default-login-layout
  title="Entre e comece hoje!"
  primaryBtnText="Cadastre-se"
  secondaryBtnText="Entre"
  (submit)="submit()"
  (navigate)="navigate()"
  [disablePrimaryBtn]="signupForm.invalid || isLoading"
>
  <!-- Spinner Overlay -->
  <div *ngIf="isLoading" class="spinner-overlay">
    <div class="spinner"></div>
  </div>

  <form [formGroup]="signupForm" [class.blur]="isLoading">

    <!-- Campo Nome -->
    <div class="input-container">
      <app-primary-input
        formControlName="name"
        inputName="name"
        type="text"
        label="Seu Nome"
        placeholder="Seu Nome"
      >
        <img src="/assets/svg/email-icon.svg">
      </app-primary-input>

      <div class="error-container" *ngIf="signupForm.get('name')?.invalid && signupForm.get('name')?.touched">
        <div *ngIf="signupForm.get('name')?.hasError('required')" class="error-message">
          • Nome é obrigatório
        </div>
        <div *ngIf="signupForm.get('name')?.hasError('minlength')" class="error-message">
          • Nome deve ter pelo menos 3 caracteres
        </div>
      </div>
    </div>

    <!-- Campo Email -->
    <div class="input-container">
      <app-primary-input
        formControlName="email"
        inputName="email"
        type="email"
        label="Email"
        placeholder="gmail@gmailcom"
      >
        <img src="/assets/svg/email-icon.svg">
      </app-primary-input>

      <div class="error-container" *ngIf="signupForm.get('email')?.invalid && signupForm.get('email')?.touched">
        <div *ngIf="signupForm.get('email')?.hasError('required')" class="error-message">
          • Email é obrigatório
        </div>
        <div *ngIf="signupForm.get('email')?.hasError('email')" class="error-message">
          • Email inválido
        </div>
      </div>
    </div>

    <!-- Campo Senha -->
    <div class="input-container">
      <app-primary-input
        formControlName="password"
        inputName="password"
        type="password"
        label="Sua Senha"
        placeholder="*****"
      >
        <img src="/assets/svg/password-icon.svg">
      </app-primary-input>

      <div class="error-container" *ngIf="signupForm.get('password')?.invalid && signupForm.get('password')?.touched">
        <div *ngIf="signupForm.get('password')?.hasError('required')" class="error-message">
          • Senha é obrigatória
        </div>
        <div *ngIf="signupForm.get('password')?.hasError('minlength')" class="error-message">
          • Senha deve ter pelo menos 6 caracteres
        </div>
      </div>
    </div>

    <!-- Campo Confirmar Senha -->
    <div class="input-container">
      <app-primary-input
        formControlName="passwordConfirm"
        inputName="passwordConfirm"
        type="password"
        label="Confirme sua Senha"
        placeholder="*****"
      >
        <img src="/assets/svg/password-icon.svg">
      </app-primary-input>

      <div class="error-container" *ngIf="signupForm.get('passwordConfirm')?.invalid && signupForm.get('passwordConfirm')?.touched">
        <div *ngIf="signupForm.get('passwordConfirm')?.hasError('required')" class="error-message">
          • Confirmação de senha é obrigatória
        </div>
        <div *ngIf="signupForm.get('passwordConfirm')?.hasError('minlength')" class="error-message">
          • Senha deve ter pelo menos 6 caracteres
        </div>
      </div>
    </div>

    <!-- Mensagem de erro para senhas não coincidentes -->
    <div *ngIf="signupForm.hasError('passwordMismatch') &&
                signupForm.get('passwordConfirm')?.touched &&
                signupForm.get('password')?.touched"
         class="error-message password-mismatch">
      As senhas não coincidem
    </div>

  </form>
</app-default-login-layout>
<app-footer />

